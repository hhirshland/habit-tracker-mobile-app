---
description: Multi-variate design exploration workflow. Use when the user asks to create "variants," "alternatives," "versions," "AB test," "comparison," or "design exploration" of a component, feature, or page section.
alwaysApply: false
---

# Variant Testing Workflow

## When to Apply

When the user asks to create "variants," "alternatives," "versions," "AB test," "comparison," or "design exploration" of a component or page section. Default to **3 variants** unless the user specifies otherwise.

## Instructions

### Before Building

1. If the user provides design directions for each variant, follow them.
2. If the user does **not** specify directions, propose 3 distinct design strategies before writing code (e.g., minimal/clean, social-proof-heavy, interactive/gamified). Wait for confirmation or adjustment before proceeding.
3. For each variant, state a one-line **design thesis** explaining its core idea.

### Generating Variants

- Create separate files named `{ComponentName}VariantA.tsx`, `{ComponentName}VariantB.tsx`, `{ComponentName}VariantC.tsx` in the same directory as the original component (or a `variants/` subdirectory if preferred).
- Every variant **must** export a component that accepts the exact same props interface as the original, so they are drop-in replaceable.
- Each variant should take a **meaningfully different** approach — not just tweaked spacing, colors, or minor copy changes. Aim for distinct layout, interaction pattern, information hierarchy, or user flow.
- If the original component doesn't exist yet, define a shared props interface in a separate `{ComponentName}.types.ts` file and import it in each variant.

### Variant Switcher

- Always generate a `{ComponentName}VariantSwitcher.tsx` file alongside the variants containing **two exports**:
  1. **Default export** — a drop-in component that accepts the same props as the variants, reads the active variant from shared module-level state, and renders the correct variant. Place this inline wherever the component appears.
  2. **Named export `VariantSwitcherBar`** — a floating bottom bar that controls which variant is active. Place this once per screen, as the last child inside the screen's root `SafeAreaView` / `View`.
- The two exports share state via a **module-level pub/sub pattern** (no React Context or Provider needed):
  - A module-scoped `_activeVariant` variable and `Set<Function>` listener set.
  - A `useActiveVariant()` hook that subscribes/unsubscribes on mount/unmount.
  - A `setActiveVariant()` function that updates the variable and notifies all listeners.
- Default to Variant A on mount.
- The switcher must be easy to remove later — swap the default import back to the chosen variant and delete the `VariantSwitcherBar` line.

#### Switcher Bar Visual Spec (always follow this exactly)

The `VariantSwitcherBar` is a dark floating pill that hovers above the tab bar / bottom of the screen. It must match this design every time:

- **Position**: `position: 'absolute', bottom: 84, left: 12, right: 12, zIndex: 9999` (floats above tab bar with horizontal margin)
- **Shape**: `borderRadius: 16` — a rounded pill / card
- **Background**: dark charcoal `#1F1D2B`
- **Shadow**: `shadowColor: '#000', shadowOffset: { width: 0, height: 4 }, shadowOpacity: 0.25, shadowRadius: 8, elevation: 10`
- **Padding**: `paddingHorizontal: 16, paddingVertical: 12`
- **Layout**: single horizontal row with `justifyContent: 'space-between', alignItems: 'center'`
  - **Left side**: label text
  - **Right side**: row of circular buttons
- **Label**: `"Variant {letter}: {name}"` in `fontSize: 14, fontWeight: '600', color: '#FFFFFF'`
- **Buttons**: one per variant (A, B, C, …), displayed in a row with `gap: 8`
  - Size: `width: 36, height: 36, borderRadius: 18` (perfect circle)
  - Inactive: `backgroundColor: '#2E2C3E'`, text `color: '#6B7280'`
  - Active: `backgroundColor: '#6C63FF'`, text `color: '#FFFFFF'`
  - Text: `fontSize: 14, fontWeight: '700'`

### Quality Standards

- Maintain the project's existing design system (colors, fonts, spacing, component library).
- Every variant must be **fully functional** — no placeholder buttons or stubbed interactions.
- Every variant must be **fully responsive** across mobile screen sizes.
- Include meaningfully different copy/headlines where applicable, not just layout changes.
- Preserve all original functionality and data flow.

### Output Format

After generating the variants, provide:

1. A **table summarizing key differences** across the variants (layout, interaction model, copy strategy, unique elements).
2. Guidance on how to swap the `VariantSwitcher` into the existing app to start testing.
3. Instructions for removing the switcher once a winner is chosen.
